@page
@model ShopWeb.Pages.Admin.OrderDetailManagerModel
@{
    Layout = "_AdminLayout";
}

<!-- Main -->
<div class="container" >
    <div class="table-wrapper">
        <div class="table-title">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h2>Manage <b>Order Details</b></h2>

            </div>


        </div>

        <table id="myTable1" class="table table-striped table-hover">
            <thead>
                <tr>
                    <th>Order ID</th>
                    <th>Product ID</th>
                    <th>Unit Price</th>
                    <th>Quantity</th>
                    <th>Product Name</th>
                    <th>Order Date</th>
                    <th>Delete</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var detail in Model.OrderDetails)
                {
                    <tr>
                        <td>@detail.OrderId</td>
                        <td>@detail.ProductId</td>
                        <td>@detail.UnitPrice.ToString("C")</td>
                        <td>@detail.Quantity</td>
                        <td>@detail.Product?.ProductName</td>
                        <td>@detail.Order?.OrderDate.ToString("yyyy-MM-dd")</td>
                        <td>
                            <a href="javascript:void(0);" onclick="deleteOrderDetail(@detail.OrderId, @detail.ProductId)" class="delete">
                                <span class="material-symbols-outlined" title="delete">delete</span>
                            </a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
        <div class="clearfix"></div>
    </div>
</div>

<script>
    function deleteOrderDetail(orderId, productId) {
        if (confirm("Are you sure you want to delete this order detail?")) {
            window.location.href = `/Admin/OrderDetailManager?handler=DeleteOrderDetail&orderId=${orderId}&productId=${productId}`;
        }
    }
</script>

<style>
    .table-title {
        margin-bottom: 20px;
    }

    .d-flex {
        display: flex;
    }

    .justify-content-between {
        justify-content: space-between;
    }

    .align-items-center {
        align-items: center;
    }

    .input-group {
        max-width: 500px;
        margin: auto;
    }

    .btn-primary {
        margin-left: 10px;
    }

    .btn-outline-secondary {
        border-color: #ddd;
    }

        .btn-outline-secondary:hover {
            background-color: #ddd;
        }
</style>
